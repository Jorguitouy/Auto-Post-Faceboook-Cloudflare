name = "facebook-auto-publisher"
main = "src/index-new.js"
compatibility_date = "2024-01-01"

# Reglas para importar archivos como texto
[[rules]]
type = "Text"
globs = ["**/*.html", "**/*.css", "**/dashboard.js", "**/assets/**/*.js"]
fallthrough = true

# Cron triggers para publicar en horarios específicos
# Ajusta estos horarios según tus necesidades
[triggers]
crons = [
  "0 9 * * *",   # 9:00 AM todos los días
  "0 14 * * *",  # 2:00 PM todos los días
  "0 19 * * *"   # 7:00 PM todos los días
]

# KV namespace para almacenar URLs y estado
[[kv_namespaces]]
binding = "FB_PUBLISHER_KV"
id = "821ab7da6c7b45b098c0470c9abe20ab"

# Variables de entorno
[vars]
FACEBOOK_API_VERSION = "v18.0"

# ⚠️ IMPORTANTE: Configuración de IA
# NO configures AI_PROVIDER, AI_MODEL ni API Keys aquí.
# Toda la configuración de IA se gestiona desde el Panel Web (tab Configuración)
# Los valores se guardan en Cloudflare KV y tienen prioridad sobre estas variables.

# Secretos requeridos (configura con: wrangler secret put SECRET_NAME)
# ADMIN_KEY - Clave de administrador para proteger el panel de configuración (OBLIGATORIO)
#
# El resto de credenciales (AI_PROVIDER, AI_MODEL, AI_API_KEY, FB_PAGE_ID, FB_PAGE_ACCESS_TOKEN)
# se configuran desde el Panel Web: https://tu-worker.workers.dev → Tab "⚙️ Configuración"
